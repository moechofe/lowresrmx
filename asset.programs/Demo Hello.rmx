'pattern for wobble bg
bg 3
for y=0 to 7
for x=0 to 7
bg copy 0,0,8,8 to x*8,y*8
next x
next y

'called every scanlines
sub r
  'wobble the bg
  scroll 3,0,cos(raster/shown.h)*cos((timer mod 40)/40)*20+cos(timer/200)*80
end sub
on raster call r

for s=50 to 99
  sprite s size 1 pal 2
next s

for s=100 to 169
  sprite s pal 1
next s

sub gravity(spr,addr)
  'change the speed in y axis
  sy=peekw(addr+2)
  pokew addr+2,sy+1
  'may reduce the speed of the particle appearance anim
  fr=peek(addr+5)
  if fr<12 and fr>0 and rnd>0.2 then poke addr+5,fr-1
end sub
on particle call gravity

msglist:
data 0,30,1,"hello retro game creator!"
data 0,140,1,"i love to code in the paris metro."
data 0,90,1,"that's why i made this app."
data 0,200,1,"join me, and have fun making games for mobile using a mobile."
data 0,140,1,"embrace and master the single tap design."
data 0,200,1,""
data 0,5,1,""
data 0,5,1,""
data 0,5,1,""
data -1

msgt=-1 :'type of message
msgd=0 :'delay before messahe
msgp=0 :'message palette
msg$="" :'message text
msge=0 :'next emitter to use

'center the text
window 0,0,15,15,0
bg 0
scroll 0,-(shown.w-15*8)/2,-(shown.h-15*8)/2

global t
t=0

sub v
  'center text
  scroll 0,-(shown.w-15*8)/2,-(shown.h-15*8)/2

  w=shown.w/2-8 : h=shown.h/2-8
  add t,sin(timer/200)+4
  si=(sin(timer/500)+1)*50+400
  for s=50 to 99
    tt=t+s*(12+(sin(timer/300)+1)*2)
    sprite s,sin(tt/si)*w+w,cos(tt/700)*h+h,16
  next s
end sub

on vbl call v

prio 1
do
  restore msglist : read msgt
  while msgt>=0
    on msgt gosub msgtxt
  wend
loop

msgtxt:
  read msgd : wait msgd
  read msgp : pal msgp
  read msg$
  while len(msg$)>0
    'search for word
    s=instr(msg$," ")
    if s>0 then
      w$=left$(msg$,s-1)
      msg$=right$(msg$,len(msg$)-s)
      gosub msgword
    else
      w$=msg$
      msg$=""
      gosub msgword
    end if
  wend
  print ""
  read msgt
  return

msgword:
  trace w$,cursor.x+len(w$)
  'not enough space for the word
  if cursor.x+len(w$)>15 and cursor.x>0 then print ""
  while len(w$)>0
    print left$(w$,1);
    w$=right$(w$,len(w$)-1)
    msgd=rnd(4)
    if msgd>0 then wait msgd
    add msge,1,0 to 3
  wend
  print " ";
  return

#1:MAIN PALETTES
083E3D0E000B0A00002E2D2C00000000
0103070F1F3F7FFF0000000000000000

#2:MAIN CHARACTERS
00000000000000000000000000000000
0103070F1F3F7FFF0000000000000000
FFFFFFFFFFFFFFFF0000000000000000
FFFEFCF8F0E0C080000103070F1F3F7F
0000000000000000FFFFFFFFFFFFFFFF
0103070F1F3F7FFFFFFFFFFFFFFFFFFF
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
FEFCF8F0E0C08000FEFCF8F0E0C08000
40E04000000000000000000000000000
00400000000000000000000000000000
00000000000000000040000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
0000030C161F2620000000030F0F1F1F
0000C07038383C7C00000080C0C0C080
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
313F1F1E0F0300000E00000100000000
F4E4C818F0C00000081830E000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00181C1C1C0C180C00000404040C000C
006C7E36120000000000121212000000
00247E3F367E3F120000001B12001B12
00083E3F1E3F1F040000000710011704
0062753A142E57230000113204081123
001C3E3A7E773A1D00000A021013001D
00181C3C180000000000040C18000000
000C1E3C38180C060000060C08000006
0030180C0E1E3C180000000002060C18
0000241A7E3F2C120000000200270812
0000181C7E3F1C0C000000040027040C
00000000181C3C180000000000040C18
000000007E3F000000000000003F0000
0000000000181C0C000000000000040C
00060F1E3C787020000003060C183020
003C7E7F777F3F1E000018110119031E
00183C1C1C1C7E3F000004040404003F
003C7E3F1E3C7E3F00001833060C003F
003C7E3F06673F1E000018330001031E
0066777F3F0707030000110139010103
007E7F7C3E077F3E00001F003801033E
001C3E7C7E773F1E00000E001811031E
007E3F0F1E3C381800003903060C0818
003C7E3F7E773F1E000018031811031E
003C7E3F1F673F1E000018011901031E
000000180C180C00000000000C000C00
000000180C183C18000000000C000C18
00000C1E3C180C06000000060C000006
0000007E3F7E3F00000000003F003F00
000030180C1E3C180000000000060C18
003C7E3F1E0C180C00001833060C000C
003C7E7F7F773C1E000018111117001E
00183C7E7F7F77330000001801191133
007C7E7F7E777F3E000018031811033E
003C7E7370763F1E000018131010031E
00787C76777F7E3C000010101113063C
007E7F787C707E3F00001F001C10003F
007E7F787C70703000001F001C101030
003C7E7E77773F1E00001E101111031E
0066777F7F7777330000110119111133
003C1E1C1C1C3C1E000006040404001E
001E0F0707673F1E000009010101031E
00667F7E7C7C76330000130604101033
0060707070707E3F000010101010003F
0042677F7F7F77330000010101191133
0066777F7F7777330000010111111133
003C7E7777773F1E000018111111031E
007C7E7F7E707030000018031E101030
003C7E777B7D3E1F000018111111001F
007C7E7F7E7C76330000180306101033
003E7F3C1E077F3E00001F001801033E
007E3F1C1C1C1C0C000027040404040C
0066777777773F1E000011111111031E
00667777773F1E0C000011111103060C
0066777F7F7F73210000110101193121
00663F1E3C7E77330000030600181133
0066773F1E1C1C0C000011030604040C
007E3F1E3C787E3F000033060C18003F
003C3E3838383C1E00000E080808001E
006030180C0603010000000000000101
003C1E0E0E0E3E1E000012020202021E
00183C7E330000000000001833000000
0000000000007E3F000000000000003F

#3:MAIN BG
00000808000001000200030004000500
06000700010002000300040005000600
07000000020003000400050006000700
00000100030004000500060007000000
01000200040005000600070000000100
02000300050006000700000001000200
03000400060007000000010002000300
04000500070000000100020003000400
05000600

